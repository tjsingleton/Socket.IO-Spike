<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Spike</title>
</head>
<body>
<p><input type="text" id="send"/></p>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script src="http://localhost:8082/socket.io/socket.io.js"></script>

<script type='text/javascript'>
   function log(prefix, message) {
     if(!message) { message = ""; }
     var data = "<p>["+prefix+ " " +(new Date()).getTime()+ "] " + message + "</p>";

     $(data).insertBefore($("#send"));
   }

   $(function(){
     window.socket = new io.connect('localhost', {port: 8082});

     socket.on('connect', function() { log("Connect"); });
     socket.on('message', function(data) { log("<-", data); });
     socket.on('disconnect', function() { log("Disconnect"); });

     var send = $("#send");
     send.keypress(function(e) {
       if (e.keyCode != "13") { return; }

       var data = send.val();
       send.val("");

       log("->", data);
       socket.send(data);
     });
   });
</script>
</body>
</html>
